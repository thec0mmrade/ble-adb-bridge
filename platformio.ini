; Bluetooth-to-ADB Bridge for Heltec WiFi LoRa 32 V3 (ESP32-S3)
; Emulates ADB keyboard (addr 2) + mouse (addr 3) from BLE HID devices

[env:heltec_wifi_lora_32_V3]
platform = espressif32@6.9.0
board = heltec_wifi_lora_32_V3
framework = arduino

; CPU at 240MHz for tight ADB timing
board_build.f_cpu = 240000000L

; Use partition scheme with no OTA to maximize app space
board_build.partitions = no_ota.csv

; NimBLE (BLE-only, no Classic BT â€” saves ~200KB RAM)
lib_deps =
    h2zero/NimBLE-Arduino@^2.1.2
    thingpulse/ESP8266 and ESP32 OLED driver for SSD1306 displays@^4.6.1

; NimBLE config: Central role only, 2 connections (kbd + mouse)
build_flags =
    -DCONFIG_BT_NIMBLE_ROLE_CENTRAL=1
    -DCONFIG_BT_NIMBLE_ROLE_PERIPHERAL=0
    -DCONFIG_BT_NIMBLE_ROLE_BROADCASTER=0
    -DCONFIG_BT_NIMBLE_ROLE_OBSERVER=1
    -DCONFIG_BT_NIMBLE_MAX_CONNECTIONS=3
    -DARDUINO_USB_CDC_ON_BOOT=0

monitor_speed = 115200
monitor_filters = esp32_exception_decoder
